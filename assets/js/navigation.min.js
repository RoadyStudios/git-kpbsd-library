"use strict";var KEYMAP={TAB:9};function initNavigation(){initNavToggleSubmenus(),initNavToggleSmall()}function initNavToggleSubmenus(){var e=document.querySelectorAll(".nav--toggle-sub");if(e.length)for(var t=0;t<e.length;t++)initEachNavToggleSubmenu(e[t])}function initEachNavToggleSubmenu(e){var t=e.querySelectorAll(".menu ul");if(t.length)for(var n=getDropdownButton(),l=0;l<t.length;l++){var a=t[l].parentNode,o=a.querySelector(".dropdown"),r=(o||((o=document.createElement("span")).classList.add("dropdown"),(r=document.createElement("i")).classList.add("dropdown-symbol"),o.appendChild(r),t[l].parentNode.insertBefore(o,t[l])),n.cloneNode(!0));r.innerHTML=o.innerHTML,o.parentNode.replaceChild(r,o),r.addEventListener("click",function(e){toggleSubMenu(e.target.parentNode)}),a.addEventListener("mouseleave",function(e){toggleSubMenu(e.target,!1)}),a.querySelector("a").addEventListener("focus",function(e){for(var t=e.target.parentNode.parentNode.querySelectorAll("li.menu-item--toggled-on"),n=0;n<t.length;n++)toggleSubMenu(t[n],!1)}),t[l].addEventListener("keydown",function(e){var t="ul.toggle-show > li > a, ul.toggle-show > li > button";KEYMAP.TAB===e.keyCode&&(e.shiftKey?isfirstFocusableElement(e.target,document.activeElement,t)&&toggleSubMenu(e.target.parentNode,!1):islastFocusableElement(e.target,document.activeElement,t)&&toggleSubMenu(e.target.parentNode,!1))}),t[l].parentNode.classList.add("menu-item--has-toggle")}}function initNavToggleSmall(){var e=document.querySelectorAll(".nav--toggle-small");if(e.length)for(var t=0;t<e.length;t++)initEachNavToggleSmall(e[t])}function initEachNavToggleSmall(t){var e=t.querySelector(".menu-toggle");e&&(e.setAttribute("aria-expanded","false"),e.addEventListener("click",function(e){t.classList.toggle("nav--toggled-on"),e.target.setAttribute("aria-expanded","false"===e.target.getAttribute("aria-expanded")?"true":"false")},!1))}function toggleSubMenu(e,t){var n=e.querySelector(".dropdown-toggle"),l=e.querySelector("ul"),a=e.classList.contains("menu-item--toggled-on");if(n.setAttribute("aria-expanded",(!(a=void 0!==t&&"boolean"==typeof t?!t:a)).toString()),a){e.classList.remove("menu-item--toggled-on"),l.classList.remove("toggle-show"),n.setAttribute("aria-label",kpbsdlibraryScreenReaderText.expand);for(var o=e.querySelectorAll(".menu-item--toggled-on"),r=0;r<o.length;r++)toggleSubMenu(o[r],!1)}else{for(var i=e.parentNode.querySelectorAll("li.menu-item--toggled-on"),g=0;g<i.length;g++)toggleSubMenu(i[g],!1);e.classList.add("menu-item--toggled-on"),l.classList.add("toggle-show"),n.setAttribute("aria-label",kpbsdlibraryScreenReaderText.collapse)}}function getDropdownButton(){var e=document.createElement("button");return e.classList.add("dropdown-toggle"),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-label",kpbsdlibraryScreenReaderText.expand),e}function isfirstFocusableElement(e,t,n){e=e.querySelectorAll(n);return 0<e.length&&t===e[0]}function islastFocusableElement(e,t,n){e=e.querySelectorAll(n);return 0<e.length&&t===e[e.length-1]}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initNavigation):initNavigation();